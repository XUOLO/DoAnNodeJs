{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\doannodejs\\\\frontend\\\\src\\\\component\\\\ProductList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductList = () => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const auth = localStorage.getItem('user');\n  const userName = localStorage.getItem('userName');\n  const token = JSON.parse(auth).data;\n  useEffect(() => {\n    getProducts();\n  }, []);\n\n  const getProducts = async () => {\n    try {\n      const result = await fetch('http://localhost:3000/products', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      if (result.ok) {\n        const data = await result.json(); // const productList = data.productList;\n        // alert(productList);\n\n        setProducts(data.data.productList);\n        localStorage.setItem('userName', JSON.stringify(data));\n      } else {\n        alert('Failed to get products');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred');\n    }\n  };\n\n  const deleteProduct = async id => {\n    console.log(id);\n    let result = await fetch(`http://localhost:3000/products/delete/${id}`, {\n      method: 'Delete'\n    });\n    result = await result.json();\n\n    if (result) {\n      getProducts();\n    }\n  };\n\n  const searchHandle = async e => {\n    let key = e.target.value;\n\n    if (key) {\n      let result = await fetch(`http://localhost:3000/products/search/${key}`);\n      result = await result.json();\n\n      if (result) {\n        setProducts(result);\n      }\n    } else {\n      getProducts();\n    }\n  };\n\n  const isAdmin = JSON.parse(localStorage.getItem('userName')).data.role === 'admin'; //  const isUser = JSON.parse(localStorage.getItem('userName')).data.role === 'user';\n\n  const isPublisher = JSON.parse(localStorage.getItem('userName')).data.role === 'publisher';\n\n  const renderOperationButtons = item => {\n    if (isAdmin) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteProduct(item._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/products/${item._id}`,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true);\n    } else if (isPublisher) {\n      return /*#__PURE__*/_jsxDEV(Link, {\n        to: `/products/${item._id}`,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 12\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"a\", {\n        children: \"...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 12\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Product List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"search-product-box\",\n      placeholder: \"Search Products\",\n      onChange: searchHandle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"S. No.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Operation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), products.length > 0 ? products.map((item, index) => /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        children: index + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: item.price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          style: {\n            width: '20px',\n            height: '20px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: renderOperationButtons(item)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this)]\n    }, item._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"No Result Found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductList, \"f86L6rLANGURv6GE6gupp7+oOp4=\");\n\n_c = ProductList;\nexport default ProductList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","Link","ProductList","products","setProducts","auth","localStorage","getItem","userName","token","JSON","parse","data","getProducts","result","fetch","method","headers","Authorization","ok","json","productList","setItem","stringify","alert","error","console","deleteProduct","id","log","searchHandle","e","key","target","value","isAdmin","role","isPublisher","renderOperationButtons","item","_id","length","map","index","name","price","image","width","height"],"sources":["C:/Users/admin/Desktop/doannodejs/frontend/src/component/ProductList.js"],"sourcesContent":["import React, {useState, useEffect } from 'react'\nimport {Link} from 'react-router-dom'\n\nconst ProductList = () => {\n    const [products, setProducts] = useState([]);\n        const auth = localStorage.getItem('user')\n        const userName = localStorage.getItem('userName')\n\n        const token = JSON.parse(auth).data;\n \n    useEffect(()=>{\n \n        getProducts();\n \n    },[])\n    const getProducts = async () => {\n        try {\n          const result = await fetch('http://localhost:3000/products', {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${token}`, \n            },\n          });\n    \n          if (result.ok) {\n            const data = await result.json();\n\n            // const productList = data.productList;\n            // alert(productList);\n            setProducts(data.data.productList);\n            localStorage.setItem('userName', JSON.stringify(data)); \n          } else {\n            alert('Failed to get products');\n          }\n        } catch (error) {\n          console.error('Error:', error);\n          alert('An error occurred');\n        }\n      };\n    \n  const deleteProduct = async (id)=>{\n      console.log(id)\n      let result = await fetch(`http://localhost:3000/products/delete/${id}`,{\n          method:'Delete',\n          \n      })\n      result = await result.json();\n      if(result){\n        getProducts();\n      }\n  }\n\n const searchHandle = async (e)=>{\n  let key = e.target.value\n  if(key){\n    let result = await fetch(`http://localhost:3000/products/search/${key}`)\n    result = await result.json()\n    if(result){\n        setProducts(result)\n    }\n  }else{\n      getProducts()\n  }\n \n }\n const isAdmin = JSON.parse(localStorage.getItem('userName')).data.role === 'admin';\n//  const isUser = JSON.parse(localStorage.getItem('userName')).data.role === 'user';\n const isPublisher = JSON.parse(localStorage.getItem('userName')).data.role === 'publisher';\n const renderOperationButtons = (item) => {\n  if (isAdmin) {\n    return (\n      <>\n        <button onClick={() => deleteProduct(item._id)}>Delete</button>\n        <Link to={`/products/${item._id}`}>Update</Link>\n      </>\n    );\n  } else if (isPublisher) {\n    return <Link to={`/products/${item._id}`}>Update</Link>;\n  } else {\n    return <a>...</a> ;  \n  }\n};\n return (\n  \n    <div className=\"product-list\">\n            {/* <a> Welcome {JSON.parse(userName).data.userName} <p>ROLE: {JSON.parse(userName).data.role}</p></a> */}\n\n      <h1>Product List</h1>\n      <input type=\"text\" className=\"search-product-box\" placeholder=\"Search Products\" onChange={searchHandle} />\n      <ul>\n        <li>S. No.</li>\n        <li>Name</li>\n        <li>Price</li>\n        <li>Image</li>\n        <li>Operation</li>\n      </ul>\n      {products.length > 0 ? (\n        products.map((item, index) => (\n          <ul key={item._id}>\n            <li>{index + 1}</li>\n            <li>{item.name}</li>\n            <li>{item.price}</li>\n            <li><img src={item.image} style={{ width: '20px', height: '20px' }} /></li> \n            <li>\n              {renderOperationButtons(item)}\n            </li>\n          </ul>\n        ))\n      ) : (\n        <h1>No Result Found</h1>\n      )}\n    </div>\n  );\n};\n\nexport default ProductList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}